<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Neural Network Music Visualizer</title>
    <link rel="stylesheet" href="css/style.css">
</head>

<body>
    <h1>Neural Network Music Visualizer</h1>
    <div class="subtitle">Real-time Audio-Reactive Neural Network Simulation</div>

    <!-- Tab Menu -->
    <div class="tab-menu">
        <button class="tab-btn" data-tab="tab-lotto">Lotto Generator</button>
        <button class="tab-btn active" data-tab="tab-nn">Neural Network</button>
    </div>

    <!-- Tab 1: Lotto Machine -->
    <div id="tab-lotto" class="tab-content" style="display: none; flex-direction: column; align-items: center; width: 100%;">
        <div class="lotto-machine">
            <!-- Set Selector -->
            <div class="set-selector">
                <label>Sets:</label>
                <button class="set-btn" data-sets="1">1</button>
                <button class="set-btn" data-sets="2">2</button>
                <button class="set-btn" data-sets="3">3</button>
                <button class="set-btn active" data-sets="5">5</button>
            </div>

            <!-- Model Selector -->
            <div class="model-selector">
                <button class="model-option" data-model="transformer" id="btnTransformer">
                    <span class="icon"><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" width="24" height="24"><path d="M12 8V4H8"/><rect width="16" height="12" x="4" y="8" rx="2"/><path d="M10 12h.01"/><path d="M14 12h.01"/></svg></span>
                    <span class="name">Transformer</span>
                    <span class="desc">Sequence Pattern Learning</span>
                </button>
                <button class="model-option" data-model="gan" id="btnGan">
                    <span class="icon"><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" width="24" height="24"><path d="M18 11.5V9a2 2 0 0 0-2-2H8a2 2 0 0 0-2 2v2.5"/><path d="M18 12.5V15a2 2 0 0 1-2 2H8a2 2 0 0 1-2-2v-2.5"/></svg></span>
                    <span class="name">GAN</span>
                    <span class="desc">Adversarial Generation</span>
                </button>
                <button class="model-option" data-model="random" id="btnRandom">
                    <span class="icon"><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" width="24" height="24"><rect width="18" height="18" x="3" y="3" rx="2" ry="2"/><path d="M12 12h.01"/><path d="M16 16h.01"/><path d="M8 8h.01"/><path d="M8 16h.01"/><path d="M16 8h.01"/></svg></span>
                    <span class="name">Random</span>
                    <span class="desc">Pure Randomness</span>
                </button>
                <button class="model-option dream-btn" id="btnDream">
                    <span class="icon"><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" width="24" height="24"><path d="M12 3a6 6 0 0 0 9 9 9 9 0 1 1-9-9Z"/></svg></span>
                    <span class="name">AI Dream</span>
                    <span class="desc">Generate from Dreams</span>
                </button>
            </div>

            <!-- Dream Input (Hidden) -->
            <div class="dream-input-container" id="dreamInputContainer" style="display: none;">
                <div class="dream-input-wrapper">
                    <textarea id="dreamText" placeholder="What did you dream last night? e.g., I saw a snake and ran away..."></textarea>
                    <button class="dream-submit-btn" id="dreamSubmitBtn">ðŸ”® Interpret</button>
                </div>
                <div class="dream-result" id="dreamResult" style="display: none;">
                    <h4>Dream Interpretation</h4>
                    <p id="dreamInterpretation"></p>
                    <div id="dreamSymbols" class="dream-symbols"></div>
                </div>
            </div>

            <!-- Ball Display Area -->
            <div class="ball-container" id="ballContainer">
                <p class="guide-message">ðŸ‘† Click one of the models above</p>
            </div>

            <!-- Clear Button -->
            <button class="clear-btn" id="clearBtn">Clear Session</button>

            <!-- History -->
            <div class="history" id="history" style="display: none;">
                <h3>Generation History</h3>
                <div id="historyList"></div>
            </div>
        </div>
    </div>

    <!-- Tab 2: Neural Network Visualizer (DEFAULT) -->
    <div id="tab-nn" class="tab-content active-content" style="display: flex; width: 100%;">
        <div class="nn-container" style="margin-top: 0;">
            <div class="nn-header">
                <div class="nn-title-wrapper" style="display: flex; align-items: center; gap: 8px;">
                    <svg viewBox="0 0 24 24" fill="none" stroke="var(--nn-primary)" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" width="20" height="20"><path d="M12 2v8"/><path d="m4.93 4.93 5.66 5.66"/><path d="M2 12h8"/><path d="m4.93 19.07 5.66-5.66"/><path d="M12 22v-8"/><path d="m19.07 19.07-5.66-5.66"/><path d="M22 12h-8"/><path d="m19.07 4.93-5.66 5.66"/><circle cx="12" cy="12" r="2"/></svg>
                    <div class="nn-title" style="margin-top: 0;">Neural Network Visualizer</div>
                </div>
                
                <!-- Main Header Mode Controls (Duplicated State) -->
                <div class="mode-toggle-group main-header-controls">
                    <input type="radio" name="musicTrackMain" id="nnTrackMain1" checked>
                    <label for="nnTrackMain1">NEURAL</label>
                    
                    <input type="radio" name="musicTrackMain" id="nnTrackMain2">
                    <label for="nnTrackMain2">RANDOM</label>
                    
                    <input type="radio" name="musicTrackMain" id="nnTrackMain3">
                    <label for="nnTrackMain3">COLOR</label>
                    
                    <input type="radio" name="musicTrackMain" id="nnTrackMain4">
                    <label for="nnTrackMain4">FLOW</label>
                </div>
            </div>

            <div class="viz-area" style="position: relative;">
                <svg id="nnSvg"></svg>
            </div>

            <!-- 1. Primary Player Bar -->
            <div class="player-bar-container">
                <div class="player-bar">
                    <select id="musicSelect" class="exec-btn music-select">
                        <option value="default" selected>Default Track (Q Train)</option>
                        <option value="inaban">Speedy Gonzalo (Guitar)</option>
                        <option value="custom">Select Music...</option>
                    </select>
                    
                    <input type="file" id="musicFile" accept="audio/*" style="display: none;">
                    
                    <div class="main-controls">
                        <button id="nnSoundToggle" class="icon-btn" title="Toggle Sound">
                            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="volume-icon"><path d="M11 5L6 9H2v6h4l5 4V5z"/><path d="M15.54 8.46a5 5 0 0 1 0 7.07"/><path d="M19.07 4.93a10 10 0 0 1 0 14.14"/></svg>
                        </button>
                        <button id="nnSettingsBtn" class="icon-btn" title="Settings">
                            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M12.22 2h-0.44a2 2 0 0 0-2 2v0.18a2 2 0 0 1-1 1.73l-0.43 0.25a2 2 0 0 1-2 0l-0.15-0.08a2 2 0 0 0-2.73 0.73l-0.22 0.38a2 2 0 0 0 0.73 2.73l0.15 0.08a2 2 0 0 1 1 1.72v0.51a2 2 0 0 1-1 1.74l-0.15 0.08a2 2 0 0 0-0.73 2.73l0.22 0.38a2 2 0 0 0 2.73 0.73l0.15-0.08a2 2 0 0 1 2 0l0.43 0.25a2 2 0 0 1 1 1.73V22h0.44a2 2 0 0 0 2-2v-0.18a2 2 0 0 1 1-1.73l0.43-0.25a2 2 0 0 1 2 0l0.15 0.08a2 2 0 0 0 2.73-0.73l0.22-0.39a2 2 0 0 0-0.73-2.73l-0.15-0.08a2 2 0 0 1-1-1.74v-0.5a2 2 0 0 1 1-1.74l0.15-0.09a2 2 0 0 0 0.73-2.73l-0.22-0.38a2 2 0 0 0-2.73-0.73l-0.15 0.08a2 2 0 0 1-2 0l-0.43-0.25a2 2 0 0 1-1-1.73V2Z"/><circle cx="12" cy="12" r="3"/></svg>
                        </button>
                        <button id="nnMusicBtn" class="exec-btn play-btn">
                            <svg viewBox="0 0 24 24" fill="currentColor" width="20" height="20"><path d="M5 3l14 9-14 9V3z"/></svg>
                            <span>PLAY MUSIC</span>
                        </button>
                        <button id="nnStopBtn" class="exec-btn stop-btn" title="Stop">
                            <svg viewBox="0 0 24 24" fill="currentColor" width="18" height="18"><path d="M6 6h12v12H6z"/></svg>
                            <span>STOP</span>
                        </button>
                    </div>
                </div>
            </div>


            <p style="font-size: 0.8rem; color: #666; margin-top: 5px; text-align: center;">
                Music Sync: High-quality audio analysis | Tools: Customize network visual behavior
            </p>

            <!-- Settings Panel (Hidden by default) -->
            <div id="nnSettingsPanel" class="settings-panel" style="display: none;">
                <div class="settings-content">
                    <div class="settings-header">
                        <h3>Visualizer Settings</h3>
                        <button id="nnSettingsClose" class="close-btn">
                            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5" stroke-linecap="round" stroke-linejoin="round" width="20" height="20"><line x1="18" y1="6" x2="6" y2="18"></line><line x1="6" y1="6" x2="18" y2="18"></line></svg>
                        </button>
                    </div>
                    
                    <div class="settings-body">
                        <div class="setting-item">
                            <label>VISUALIZATION MODE</label>
                            <div class="mode-toggle-group">
                                <input type="radio" name="musicTrack" id="nnTrack1" checked>
                                <label for="nnTrack1">NEURAL</label>
                                
                                <input type="radio" name="musicTrack" id="nnTrack2">
                                <label for="nnTrack2">RANDOM</label>
                                
                                <input type="radio" name="musicTrack" id="nnTrack3">
                                <label for="nnTrack3">COLOR</label>
                                
                                <input type="radio" name="musicTrack" id="nnTrack4">
                                <label for="nnTrack4">FLOW</label>
                            </div>
                        </div>

                        <div class="setting-item">
                            <label>MASTER VOLUME</label>
                            <div class="slider-wrapper">
                                <input type="range" id="nnVolume" min="0" max="1" step="0.01" value="0.7">
                            </div>
                        </div>

                        <div class="setting-item">
                            <label>FLOW SPEED</label>
                            <input type="range" id="nnSpeed" min="100" max="1000" value="400" step="50">
                            <div class="slider-labels">
                                <span>Slow</span>
                                <span>Fast</span>
                            </div>
                        </div>

                        <div class="setting-item">
                            <label>NETWORK STRUCTURE</label>
                            <input type="text" id="nnStructure" class="nn-input" value="2, 3, 4, 5, 3, 1" placeholder="e.g., 2,3,4,5,3,1">
                            <small>Comma-separated nodes per layer</small>
                        </div>
                        
                        <div style="margin-top: 20px; text-align: center;">
                            <button id="nnApplyBtn" class="exec-btn" style="width: 100%; background: #0984e3; padding: 12px;">APPLY CHANGES</button>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <footer>
        <p>AI predictions are for entertainment purposes only.</p>
        <p>Powered by Web Audio API & SVG</p>
    </footer>

    <!-- Main Logic + Tabs -->
    <script src="js/main.js"></script>
    <!-- Neural Viz Logic -->
    <script src="js/nn-core.js"></script>
    <script src="js/audio-engine.js"></script>
    <script src="js/neural-viz.js"></script>
</body>

</html>