# Lotto X 구현 계획서

> **문서 분석 기준**: `AI 코딩으로 로또 앱 경쟁력 강화.md`

---

## 📋 개요

| 항목 | 내용 |
|------|------|
| **프로젝트명** | Lotto X |
| **목표** | 퀵로또를 뛰어넘는 AI/AR 기반 로또 앱 |
| **핵심 컨셉** | "Trustworthy Excitement" (신뢰할 수 있는 설렘) |

---

## 🔍 현재 자산 분석

### 기존 구현 (유지)
```
server.py           → FastAPI 백엔드 (번호 생성 API)
models/transformer/ → Transformer 모델 (16MB)
models/gan/         → GAN 모델 (5.7MB)
web/index.html      → 단일 페이지 프론트엔드
```

### 현재 기능
- ✅ Transformer/GAN/Random 번호 생성
- ✅ 다크 테마 UI (#1a1a2e)
- ✅ 로또 공 애니메이션 + 사운드
- ✅ 생성 기록 표시

---

## 🎯 문서 제안 기능 대조표

### Tier 1: 핵심 차별화 (Must Have)

| 기능 | 문서 설명 | 구현 난이도 | 기술 요구사항 |
|------|----------|-------------|---------------|
| **AI 해몽 스튜디오** | LLM 기반 꿈 분석 → 번호 생성 | ⭐⭐⭐ | OpenAI API |
| **하이퍼 QR 스캐너** | 연속 스캔, AR 오버레이 | ⭐⭐⭐⭐ | 카메라 네이티브 모듈 |
| **AR 명당 찾기** | 당첨점 AR 오버레이 | ⭐⭐⭐⭐⭐ | ViroReact, GPS |

### Tier 2: UX 강화 (Should Have)

| 기능 | 문서 설명 | 구현 난이도 |
|------|----------|-------------|
| **플립 시계 카운트다운** | 다음 추첨까지 시간 | ⭐⭐ |
| **당첨금 표시** | 1등 예상 당첨금 | ⭐⭐ |
| **햅틱 피드백** | 인터랙션 진동 | ⭐ |
| **생체 인증** | FaceID/TouchID 로그인 | ⭐⭐ |

### Tier 3: 비즈니스 (Nice to Have)

| 기능 | 문서 설명 | 구현 난이도 |
|------|----------|-------------|
| **Premium 구독** | 광고 제거, 무제한 AI | ⭐⭐⭐ |
| **클라우드 백업** | 기기 간 데이터 동기화 | ⭐⭐ |
| **과몰입 방지** | 월간 구매 한도 경고 | ⭐ |

---

## 🛠️ 기술 스택 결정

### 논의 결과

| 옵션 | 장점 | 단점 | 선택 |
|------|------|------|------|
| **React Native (Expo)** | 문서 권장, AR 최적화 | React 학습 필요 | - |
| **Vue/Quasar + Capacitor** | 기존 경험, 빠른 개발 | AR 제한적 | - |

### 모바일 우선 시 권장
```
┌─────────────────────────────────────────┐
│  프레임워크: React Native (Expo)         │
│  UI: NativeWind (Tailwind)              │
│  상태관리: Zustand + TanStack Query      │
│  로컬DB: MMKV                           │
└─────────────────────────────────────────┘
```

---

## ⚠️ AI 모델 배포 문제

### 현재 모델 상태
```
models/transformer/best_model.pt   → 16MB
models/transformer/bonus_model.pt  → 572KB
models/gan/generator.pt            → 5.7MB
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
총합: ~22MB + PyTorch 의존성
```

### Vercel 배포 제한
| 제한 | 값 | 문제 |
|-----|----|----|
| 배포 크기 | 50MB | PyTorch 포함 시 초과 ⚠️ |
| Edge 함수 | 1MB | 모델 불가 ❌ |
| 타임아웃 | 10초 | 모델 로딩 ⚠️ |

### 해결 옵션

#### 옵션 A: 별도 AI 서버 (권장)
```
┌─────────────┐     ┌─────────────┐     ┌─────────────┐
│   Vercel    │────▶│   Railway   │────▶│   Supabase  │
│ (프론트엔드) │     │  (FastAPI)  │     │    (DB)     │
└─────────────┘     └─────────────┘     └─────────────┘
```
- **Railway**: 현재 `server.py` 그대로 Docker 배포
- **비용**: 월 $5~

#### 옵션 B: 통계 알고리즘으로 전환
```
TF/GAN 모델 제거 → 통계 기반 번호 생성
→ Supabase Edge Functions로 모든 것 통합
→ 추가 서버 불필요
```

#### 옵션 C: ONNX + 외부 호스팅
```
PyTorch → ONNX 변환
→ Replicate.com 또는 Modal.com 배포
→ API 호출로 번호 받기
```

---

## 📐 아키텍처 제안

### 최종 권장 구성
```
                    ┌─────────────┐
  모바일 앱 ────────▶│   Vercel    │ (웹 버전 배포)
  (Expo/Capacitor)  └──────┬──────┘
         │                 │
         ▼                 ▼
  ┌─────────────┐   ┌─────────────┐
  │   Railway   │   │  Supabase   │
  │  (FastAPI)  │   │(DB + Auth)  │
  │ TF/GAN 모델 │   │ 역대 당첨   │
  └─────────────┘   └─────────────┘
         │                 │
         └────────┬────────┘
                  ▼
           ┌─────────────┐
           │ OpenAI API  │
           │  (AI 해몽)  │
           └─────────────┘
```

---

## 🚀 단계별 구현 계획

### Phase 1: 기반 구축 (1주)
- [ ] React Native (Expo) 또는 Vue/Quasar 프로젝트 생성
- [ ] Supabase 연동 (Auth + DB)
- [ ] 기존 번호 생성 API 연동
- [ ] 다크 테마 적용

### Phase 2: 핵심 기능 (2주)
- [ ] 플립 시계 카운트다운
- [ ] 당첨금 표시
- [ ] AI 해몽 기능 (OpenAI 연동)
- [ ] 햅틱 피드백

### Phase 3: 고급 기능 (2주)
- [ ] QR 스캐너 (연속 스캔)
- [ ] 통계 대시보드
- [ ] 생체 인증

### Phase 4: AR/Premium (선택)
- [ ] AR 명당 찾기
- [ ] Premium 구독 시스템
- [ ] 클라우드 백업

---

## 📝 결정 필요 사항

> [!IMPORTANT]
> **검토 후 결정 필요:**
> 
> 1. **프레임워크**: React Native vs Vue/Quasar + Capacitor
> 2. **AI 모델 배포**: Railway 사용 vs 통계 알고리즘 전환
> 3. **AR 기능**: 필수 vs 추후 검토
> 4. **OpenAI API 키**: AI 해몽 기능 필요 시 준비

---

## 📎 참고 문서

- 원본: [AI 코딩으로 로또 앱 경쟁력 강화.md](./AI%20코딩으로%20로또%20앱%20경쟁력%20강화.md)
- 디자인 컬러: `#0F172A` (배경), `#FFD700` (강조), `#00E676` (성공)
- 폰트: Pretendard (한글), Roboto Mono (숫자)
